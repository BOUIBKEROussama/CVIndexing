version: 2.1 # CircleCI version
jobs:
  build:
    machine: true # Use a Linux VM instead of docker environment
    steps:
      - checkout
      - run: docker-compose up -d --build elasticsearch kibana logstash
      - run: docker-compose up -d --build app cvindexer
      - store_artifacts:
          path: ~/CVIndexing/features/fail-screenshots

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  sample: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    jobs:
      - build
